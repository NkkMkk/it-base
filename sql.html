<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Notes</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-okaidia.min.css">
</head>
<body>
<header>
    <nav class="main-nav">
        <a href="index.html" class="home-icon" aria-label="Home">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#ffd54f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12L12 3l9 9"/><path d="M9 21V9h6v12"/></svg>
        </a>
        <span class="page-title">SQL Notes</span>
    </nav>
</header>
<aside class="side-nav">
    <ul id="dynamic-sidebar">
        <!-- Sidebar links will be generated by JavaScript -->
    </ul>
</aside>
<main>
    <div class="container">
        <section id="sql-notes" class="main-content">
            <div class="card-block">
                <section id="about-sql" class="card">
                    <h2>Introduction to SQL</h2>
                    <p>SQL (Structured Query Language) is the standard language for interacting with relational databases. This section introduces the core concepts of databases, DBMS, and RDBMS in a clear, structured, and human-friendly way.</p>
                    <div class="info-block">
                        <h3>What is a Database?</h3>
                        <p>A <strong>database</strong> is an organized collection of data. Data can be text, numbers, images, or any other type of information. Databases help us store, organize, and retrieve this information efficiently.</p>
                        <p><em>Analogy:</em> Think of a library. The library is a database, and each book is a record. Books are organized by categories (tables), and each book has details like title, author, and year (columns).</p>
                        <p>Databases are everywhere: they store product info in shops, customer data in businesses, and even the prices you see at the supermarket checkout.</p>
                    </div>
                    <div class="info-block">
                        <h3>What is a DBMS?</h3>
                        <p>A <strong>Database Management System (DBMS)</strong> is software that lets you create, manage, and use databases. It handles tasks like:</p>
                        <ul>
                            <li>Defining and organizing data</li>
                            <li>Retrieving and updating information</li>
                            <li>Enforcing rules for data integrity and security</li>
                        </ul>
                        <p>Popular DBMS examples: MySQL, PostgreSQL, SQLite, Oracle, Microsoft SQL Server.</p>
                    </div>
                    <div class="info-block">
                        <h3>What is an RDBMS?</h3>
                        <p>A <strong>Relational Database Management System (RDBMS)</strong> is a type of DBMS that stores data in tables (rows and columns). The <em>relational</em> part means tables can be linked by relationships, making it easy to connect and query related data.</p>
                        <ul>
                            <li>Each table represents a type of entity (e.g., users, products).</li>
                            <li>Rows are records (e.g., a single user).</li>
                            <li>Columns are fields (e.g., name, email).</li>
                        </ul>
                        <p><strong>Common RDBMS:</strong> PostgreSQL, MySQL, Oracle, SQLite, H2.</p>
                    </div>
                    <div class="info-block">
                        <h3>How is Data Organized?</h3>
                        <p>Relational databases organize information in tables. Each table can have thousands or millions of records. Columns have descriptive names and specific data types (like text, number, date).</p>
                        <p><strong>Example table:</strong></p>
                        <pre><code class="language-sql">+----+-------+-----+
| id | name  | age |
+----+-------+-----+
| 1  | Anna  | 23  |
| 2  | John  | 31  |
| 3  | Olga  | 27  |
+----+-------+-----+</code></pre>
                    </div>
                </section>
                <section id="common-commands" class="card">
                    <h2>Common SQL Commands</h2>
                    <ul>
                        <li><code>SELECT</code> – Retrieve data from a database</li>
                        <li><code>INSERT</code> – Add new data to a database</li>
                        <li><code>UPDATE</code> – Modify existing data</li>
                        <li><code>DELETE</code> – Remove data</li>
                        <li><code>CREATE</code> – Create new tables or databases</li>
                        <li><code>DROP</code> – Delete tables or databases</li>
                    </ul>
                </section>
                <section id="create-table" class="card">
                    <h2>Create in SQL</h2>
                    <pre><code class="language-sql">CREATE TABLE users (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100)
);</code></pre>
                </section>
                <section id="insert-data" class="card">
                    <h2>Insert Data</h2>
                    <pre><code class="language-sql">INSERT INTO users (id, name, email) VALUES (1, 'Alice', 'alice@example.com');</code></pre>
                </section>
                <section id="query-data" class="card">
                    <h2>Query Data</h2>
                    <pre><code class="language-sql">SELECT * FROM users;</code></pre>
                </section>
                <section id="dbms" class="card">
                    <h2>Popular Database Systems</h2>
                    <ul>
                        <li><span class="dbms">MySQL</span></li>
                        <li><span class="dbms">PostgreSQL</span></li>
                        <li><span class="dbms">SQLite</span></li>
                        <li><span class="dbms">Microsoft SQL Server</span></li>
                        <li><span class="dbms">Oracle Database</span></li>
                    </ul>
                </section>
                <section id="more-info" class="card">
                    <h2>More Information</h2>
                    <ul>
                        <li>SQL is <strong>case-insensitive</strong>, but keywords are usually written in uppercase for clarity.</li>
                        <li>Relational databases store data in <strong>tables</strong> (rows and columns).</li>
                        <li>SQL is used for data analysis, reporting, and application development.</li>
                    </ul>
                    <h3>Markdown Example</h3>
                    <pre><code class="language-markdown"># SQL Example

```sql
SELECT * FROM users WHERE id = 1;
```
</code></pre>
                </section>
                <section id="select-clause" class="card">
                    <h2>SELECT Clause</h2>
                    <div class="info-block">
                        <h3>Introduction</h3>
                        <p>In this lesson, you will learn how to create simple queries using the <strong>SELECT</strong> statement.</p>
                    </div>
                    <div class="info-block">
                        <h3>What is SQL?</h3>
                        <p><strong>Structured Query Language (SQL)</strong> is a programming language used to communicate with data in a relational database. Its syntax is similar to English, making it accessible for those familiar with the language. Many Database Management Systems (DBMS) use SQL or its variants to access data in tables.</p>
                        <p>Fun fact: SQL is pronounced letter by letter ("S-Q-L"), but the name “sequel” is also used.</p>
                    </div>
                    <div class="info-block">
                        <h3>CRUD</h3>
                        <p>When working with databases, you can perform four basic operations: Create, Read, Update, and Delete—summarized by the acronym <strong>CRUD</strong>.</p>
                        <p>Today, we'll focus on the <strong>Read</strong> operation, which means retrieving data from the database using the <strong>SELECT</strong> statement. This statement returns the found data as a result table (also called a result set).</p>
                    </div>
                    <div class="info-block">
                        <h3>SELECT Syntax</h3>
                        <pre><code class="language-sql">SELECT column_1, column_2, ...
FROM table_name;
</code></pre>
                        <ul>
                            <li><strong>column_1, column_2, ...</strong> – columns of the table</li>
                            <li><strong>table_name</strong> – the name of the table you want to query</li>
                        </ul>
                        <p>To select all fields from a table, use the asterisk (<code>*</code>):</p>
                        <pre><code class="language-sql">SELECT *
FROM table_name;
</code></pre>
                    </div>
                    <div class="info-block">
                        <h3>Comments in SQL</h3>
                        <p>Comments are used to explain parts of SQL statements or to prevent their execution. They can be single-line or multi-line.</p>
                        <ul>
                            <li><strong>Single-line comments</strong> start with <code>--</code>. Any text between <code>--</code> and the end of the line will not be executed:</li>
                        </ul>
                        <pre><code class="language-sql">--SELECT * FROM actor;
SELECT * FROM movie;
</code></pre>
                        <ul>
                            <li><strong>Multi-line comments</strong> start with <code>/*</code> and end with <code>*/</code>. Text between <code>/*</code> and <code>*/</code> will not be executed:</li>
                        </ul>
                        <pre><code class="language-sql">/* SELECT name FROM actor;
SELECT title FROM book; */
SELECT title FROM movie;
</code></pre>
                    </div>
                </section>
            </div>
        </section>
    </div>
</main>
<!-- Prism.js library for syntax highlighting -->
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-sql.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markdown.min.js"></script>
<script>
// Dynamically generate sidebar links for all .card sections and their info-blocks
(function() {
  const sidebar = document.getElementById('dynamic-sidebar');
  const cards = document.querySelectorAll('.card-block > .card');
  sidebar.innerHTML = '';
  cards.forEach(card => {
    const id = card.id;
    const heading = card.querySelector('h2');
    if (id && heading) {
      const li = document.createElement('li');
      li.className = 'sidebar-main-item';
      const a = document.createElement('a');
      a.href = `#${id}`;
      a.textContent = heading.textContent;
      a.className = 'sidebar-main-link';
      li.appendChild(a);

      // Find info-blocks (subsections) inside the card
      const infoBlocks = card.querySelectorAll('.info-block h3');
      if (infoBlocks.length > 0) {
        const subUl = document.createElement('ul');
        subUl.className = 'sidebar-sublist';
        infoBlocks.forEach((sub, idx) => {
          if (!sub.id) {
            sub.id = `${id}-sub${idx+1}`;
          }
          const subLi = document.createElement('li');
          const subA = document.createElement('a');
          subA.href = `#${sub.id}`;
          subA.textContent = sub.textContent;
          subA.className = 'sidebar-sub-link';
          subLi.appendChild(subA);
          subUl.appendChild(subLi);
        });
        // Hide sublist by default
        subUl.style.display = 'none';
        li.appendChild(subUl);
      }
      sidebar.appendChild(li);
    }
  });

  // Show sublist only for the active/hovered main item
  let activeLi = null;
  let isSidebarScrolling = false;
  // Скрыть все подменю кроме li (если передан)
  function hideAllSublistsExcept(li) {
    document.querySelectorAll('.sidebar-sublist').forEach(ul => {
      if (!li || !li.contains(ul)) {
        ul.style.display = 'none';
      }
    });
    // Убрать выделение со всех main-link
    sidebar.querySelectorAll('.sidebar-main-link').forEach(link => link.classList.remove('active-sidebar-link'));
    // Выделить активный пункт
    if (activeLi) {
      const mainLink = activeLi.querySelector('.sidebar-main-link');
      if (mainLink) mainLink.classList.add('active-sidebar-link');
      const sub = activeLi.querySelector('.sidebar-sublist');
      if (sub) sub.style.display = 'block';
    }
  }
  // Показать подменю для li (без выделения)
      function showSublistHover(li) {
        const sub = li.querySelector('.sidebar-sublist');
        if (sub) sub.style.display = 'block';
      }
      // Сделать li активным (выделить и показать подменю)
      function setActiveLi(li) {
        activeLi = li;
        hideAllSublistsExcept(li);
        const mainLink = li.querySelector('.sidebar-main-link');
        if (mainLink) mainLink.classList.add('active-sidebar-link');
        const sub = li.querySelector('.sidebar-sublist');
        if (sub) sub.style.display = 'block';
      }
      // Наведение — только показать подменю, не менять выделение
      sidebar.querySelectorAll('.sidebar-main-link').forEach(link => {
        const li = link.parentElement;
        link.addEventListener('mouseenter', () => showSublistHover(li));
        link.addEventListener('focus', () => showSublistHover(li));
        link.addEventListener('click', function(e) {
          setActiveLi(li);
          isSidebarScrolling = true;
          // Плавный скролл с offset
          const href = link.getAttribute('href');
          if (href && href.startsWith('#')) {
            const el = document.querySelector(href);
            if (el) {
              e.preventDefault();
              const y = el.getBoundingClientRect().top + window.pageYOffset - 200;
              window.scrollTo({ top: y, behavior: 'smooth' });
              history.replaceState(null, '', href);
              // Ждем окончания скролла (примерно 500мс)
              clearTimeout(window._sidebarScrollTimeout);
              window._sidebarScrollTimeout = setTimeout(() => {
                isSidebarScrolling = false;
                updateSidebarOnScroll();
              }, 500);
            }
          }
        });
      });
      // При уходе мыши с сайдбара — вернуть только активную секцию
      sidebar.addEventListener('mouseleave', () => {
        hideAllSublistsExcept(activeLi);
      });
      // При скролле — активировать ближайшую секцию, если не скроллим по клику
      function updateSidebarOnScroll() {
        if (isSidebarScrolling) return;
        let found = false;
        cards.forEach(card => {
          const rect = card.getBoundingClientRect();
          if (!found && rect.top < window.innerHeight/2 && rect.bottom > 200) {
            const li = sidebar.querySelector(`a[href="#${card.id}"]`).parentElement;
            setActiveLi(li);
            // Highlight the card in the main content
            document.querySelectorAll('.card').forEach(c => c.classList.remove('active-card'));
            card.classList.add('active-card');
            found = true;
          } else {
            card.classList.remove('active-card');
          }
        });
        if (!found) {
          hideAllSublistsExcept(null);
          document.querySelectorAll('.card').forEach(c => c.classList.remove('active-card'));
        }
      }
      window.addEventListener('scroll', updateSidebarOnScroll);
      // Initial state: активировать первый пункт
      const firstLi = sidebar.querySelector('.sidebar-main-item');
      if (firstLi) setActiveLi(firstLi);

      // Smooth scroll with offset for sidebar links
      sidebar.addEventListener('click', function(e) {
        const target = e.target;
        if (target.classList.contains('sidebar-sub-link') && target.getAttribute('href').startsWith('#')) {
          isSidebarScrolling = true;
          const href = target.getAttribute('href');
          const el = document.querySelector(href);
          if (el) {
            e.preventDefault();
            // Increase offset for more space above the card
            const offset = 120; // px below the top of the viewport
            const y = el.getBoundingClientRect().top + window.pageYOffset - offset;
            window.scrollTo({ top: y, behavior: 'smooth' });
            history.replaceState(null, '', href);
            clearTimeout(window._sidebarScrollTimeout);
            window._sidebarScrollTimeout = setTimeout(() => {
              isSidebarScrolling = false;
              updateSidebarOnScroll();
            }, 500);
          }
        }
      });

})(); // <-- closes and immediately invokes the function
// --- Add card selection logic only ---
(function() {
  // Card selection on scroll
  function selectCenteredCard() {
    const cards = document.querySelectorAll('.card-block > .card');
    let closestCard = null;
    let closestDistance = Infinity;
    const viewportCenter = window.innerHeight / 2;
    cards.forEach(card => {
      const rect = card.getBoundingClientRect();
      const cardCenter = rect.top + rect.height / 2;
      const distance = Math.abs(cardCenter - viewportCenter);
      if (distance < closestDistance) {
        closestDistance = distance;
        closestCard = card;
      }
    });
    cards.forEach(card => card.classList.remove('active-card'));
    if (closestCard) closestCard.classList.add('active-card');
  }
  window.addEventListener('scroll', selectCenteredCard);
  window.addEventListener('resize', selectCenteredCard);
  document.addEventListener('DOMContentLoaded', selectCenteredCard);
})();
</script>
</body>
</html>
